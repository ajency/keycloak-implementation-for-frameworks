<div class="col-lg-12 col-md-12" ng-controller="cityController" ng-init="getAllConstants();">
  <h3 class="text-center">Cities</h3>
  <button style="position:relative;z-index:20" class="btn btn-success" ng-click="editCity('new', 'show');toggleModal();">
    <span class="glyphicon glyphicon-"></span> Create New City
  </button>
  <div style="position:relative;z-index:20" class="form-group pull-right">
    <input type="text" ng-model="searchValue" class="form-control" placeholder="Search">
  </div>
  </br>
  </br>
  <div style="position:relative;z-index:20" class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th ng-click="sort('id')">City Id
            <span class="glyphicon sort-icon" ng-show="sortKey=='id'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
          </th>
          <th ng-click="sort('city')">City
            <span class="glyphicon sort-icon" ng-show="sortKey=='city'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
          </th>
          <th>Airports
          </th>
          <th ng-click="sort('international_airport')">Has international airport
            <span class="glyphicon sort-icon" ng-show="sortKey=='international_airport'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
          </th>
          <th ng-click="sort('state')">State
            <span class="glyphicon sort-icon" ng-show="sortKey=='state'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
          </th>
          <th>Edit</th>
          <th>Status</th>
          <th>Saved Images</th>
        </tr>
      </thead>
      <tbody>
        <tr dir-paginate="city in cities |orderBy:sortKey:reverse|filter:searchValue|itemsPerPage:8">
          <td class="text-center col-lg-1">{{ city.id }}</td>
          <td class="text-center col-lg-1">{{ city.city }}</td>
          <td class="text-center col-lg-1">
            <span ng-repeat="airport in city.airports"><span ng-hide="$index === 0"> , </span>{{airport.code}}</span>
          </td>
          <td class="text-center col-lg-2">{{city.international_airport}}</td>
          <td class="text-center col-lg-2">{{ city.state }}</td>
          <td class="text-center col-lg-2">
            <button class="btn" ng-click="editCity(city.sequence);toggleModal();">
            <span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;Edit
          </button>
          </td>
          <td class="text-center col-lg-2">
            <button class="btn btn-success btn-sm statusBtn" ng-show="city.status" ng-click="statusCity(city.sequence)">
            Active
          </button>
            <button class="btn btn-danger btn-sm statusBtn" ng-hide="city.status" ng-click="statusCity(city.sequence)">
            Deactive
          </button>
          </td>
          <td class="text-center">
            <button class="btn btn-success btn-sm statusBtn" ng-click="showSavedImages(city.sequence)">
            Show
          </button>
          </td>
        </tr>
      </tbody>
    </table>
    <dir-pagination-controls max-size="20" direction-links="true" boundary-links="true">
    </dir-pagination-controls>
  </div>
  <!-- End table-responsive -->

  <button style="position:relative;z-index:20" class="btn btn-success" ng-click="getMoreCities();">
    <span class="glyphicon glyphicon-"></span> Get More
  </button>
  <modal title="City Form" dikhao="showModal">
    <form class="form-horizontal">
      <div class="form-group" ng-if="act == 'add'">
        <label class="col-sm-3 control-label">State:<span style="color:red">*</span></label>
        <div class="col-sm-4">
          <dropdownsingleselect model="cityController.state" options="states"></dropdownsingleselect>
        </div>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.state === null)">State is required</span>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">City:<span style="color:red">*</span></label>

        <div class="col-sm-4">
          <input type="text" class="form-control" ng-model="cityController.city" placeholder="City">
        </div>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.city === '')">City is required.</span>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-4 col-sm-offset-3">
          <input type="checkbox" ng-model="cityController.isCommon"> &nbsp&nbsp This city is a common tourist destination
          &nbsp&nbsp
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-4 col-sm-offset-3">
          <input type="checkbox" ng-model="cityController.airport"> &nbsp&nbsp This city has atleast one airport &nbsp&nbsp
        </div>
      </div>
      <div ng-show="cityController.airport===true">

        <div class="form-group">
          <div class="col-sm-4 col-sm-offset-3">
            <input type="checkbox" ng-model="cityController.international"> &nbsp&nbsp This city has atleast one international
            airport &nbsp&nbsp
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">Airports:</label>
          <div class="col-sm-4">
            <div ng-repeat="item in airportarray track by $index">

              <span class="control-label">{{item.name}}, ({{item.code}})</span>
              <span ng-click="cityController.deleteAirport($index)" style="color:red;cursor:pointer;" class="glyphicon glyphicon-remove"></span>
              <br>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">Add New Airport:</label>
          <div class="col-sm-4">
            <div class="input-group">
              <input type="text" class="form-control" name="search" ng-model="cityController.search" placeholder="Search by name, code">
              <span class="input-group-addon search" ng-click="addNewAirport()"><span
                class="glyphicon glyphicon-search"></span> </span>
            </div>
          </div>
          <div class="col-sm-4">
            <span style="color:red" ng-show="showerror() && showerr">Search text is required.</span>
          </div>
        </div>
        <div class="form-group" ng-show="showselect">
          <div class="col-sm-4 col-sm-offset-3">
            <select class="form-control" ng-model="cityController.selectedAirport" ng-change="hideSelect()" ng-options="item as item.formattedName for item in cityController.listAirports">
              <option value="">Select Airport</option>
            </select>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Recommended Months:<span style="color:red">*</span></label>
        <div class="col-sm-8">
          <dropdown-multiselect model="cityController.idealmonths" options="months"></dropdown-multiselect>
        </div>
        <div class="col-sm-4 col-sm-offset-3">
          <span style="color:red" ng-show="(cityController.idealmonths.length === 0)">Choose atleast one.</span>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Location:<span style="color:red">*</span></label>
        <div class="col-sm-4">
          <button class="btn btn-success" ng-click="getGoogleLocation();">
            <span class="glyphicon glyphicon-"></span> Get Location
          </button>
          <select class="form-control" ng-model="cityController.location"
                  ng-options="item as item.name for item in googleLocations"
                  ng-change="onLocationSelected(cityController.location)">
            <option value="">Select Option</option>
          </select>
          <input type="text" class="form-control" id="lat" ng-model="cityController.lat" placeholder="Latitude" ng-change="loadMap(cityController.lat,cityController.long,0)">
          <input type="text" class="form-control" id="lng" ng-model="cityController.long" placeholder="longitute" ng-change="loadMap(cityController.lat,cityController.long,0)">
        </div>
        <div class="col-sm-5">
          <div class="map_canvas" id="map_canvas"></div>
          <button style="float:right" ng-click="loadMap(cityController.lat,cityController.long,0)">
            Re-Center
          </button>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Short Description:</label>
        <div class="col-sm-6">
          <textarea class="form-control" rows="1" ng-model="cityController.short_description" placeholder="Short Description"></textarea>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Long Description:</label>
        <div class="col-sm-6">
          <textarea class="form-control" rows="10" ng-model="cityController.description" placeholder="Long Description"></textarea>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Skyscanner CityID :<span style="color:red">*</span></label>
        <div class="col-sm-2">
          <input type="text" class="form-control" ng-model="cityController.skyscanner_id" placeholder="Skyscanner CityID">
        </div>
        <label class="col-sm-3 control-label">Source : http://partners.api.skyscanner.net/apiservices/autosuggest/v1.0/GB/GBP/en-GB?query=mumbai&apiKey=prtl6749387986743898559646983194</label>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.skyscanner_id === '')">Skyscanner CityID is required</span>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Goomo Location :<span style="color:red">*</span></label>
        <div class="col-sm-2">
          <div angucomplete-alt id="exGoomoLocation" placeholder="Select Goomo Location" pause="300" selected-object="selectedLocationFunction" remote-url-request-with-credentials="false" remote-api-handler="searchAPI" remote-url-request-formatter="" remote-url-data-field="locations"
          search-field="city" title-field="city" index-field="$index" initial-value="cityController.goomo_location" description-field="type" minlength="1" input-class="form-control form-control-small" remote-url-response-formatter="remoteUrlResponseFn"
          match-class="highlight" ng-model="cityController.goomo_location" class="departure_city">
          </div>
        </div>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.goomo_location === '' || cityController.goomo_location === null)">Goomo Location is required</span>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Travelbulls CityID :<span style="color:red">*</span></label>
        <div class="col-sm-2">
          <input type="text" class="form-control" ng-model="cityController.travelbulls_city_id" placeholder="Travelbulls CityID">
        </div>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.travelbulls_city_id === '')">Travelbulls CityID is required</span>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label">Travelbulls CountryID :<span style="color:red">*</span></label>
        <div class="col-sm-2">
          <input type="text" class="form-control" ng-model="cityController.travelbulls_country_id" placeholder="Travelbulls CountryID">
        </div>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.travelbulls_country_id === '')">Travelbulls CountryID is required</span>
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-3 control-label">Hotel ID :<span style="color:red">*</span></label>
        <div class="col-sm-2">
          <input type="number" class="form-control" ng-model="cityController.hotel_id" placeholder="Hotel ID">
        </div>
        <div class="col-sm-4">
          <span style="color:red" ng-show="(cityController.hotel_id === '' || cityController.hotel_id < 0)">Hotel ID is required</span>
        </div>
      </div>

    </form>
    <!-- End Form -->
    <hr>
    <button class="btn btn-primary" ng-disabled="checkSaveCity(error, incomplete, cityController)" ng-click="saveCity()">
      <span class="glyphicon glyphicon-save"></span> Save Changes
    </button>
  </modal>
  <!-- End modal -->
</div>
<!-- End container -->
