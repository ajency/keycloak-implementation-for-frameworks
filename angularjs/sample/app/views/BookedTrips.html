<div class="col-lg-12 col-md-12" ng-controller="bookedTrips" ng-init="getBookedTrips(); getBookingStatus()">
  <h3 class="text-center">Bookings</h3>

  <button style="position:relative;z-index:13" class="btn btn-success" ng-click="addOfflineBooking()">
    Add Offline booking
  </button>


  <div style="position:relative;z-index:21" class="form-group pull-right">
    <!--<label >Search</label>-->


    <select class="form-control" ng-model="searchStatus" ng-change="getStatusId(searchStatus)">
      <option value="">All Status</option>
      <option ng-repeat="item in allstatusSearch"  value={{item.id}} ng-class="{green: (item.id===0)}">{{item.name}}</option>
    </select>
    <input type="text" ng-model="searchValue" class="form-control" placeholder="Search">
  </div>
  <div style="font-size:40px;padding-top:15px" class="glyphicon glyphicon-filter pull-right"></div>
  <br><br>
  <div style="position:relative;z-index:20" class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead>
      <tr>
        <th ng-click="sort('id')">Id
          <span class="glyphicon sort-icon" ng-show="sortKey=='id'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>
        <th ng-click="sort('ref_number')">Reference Number
          <span class="glyphicon sort-icon" ng-show="sortKey=='ref_number'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>
        <th ng-click="sort('login_id')">Customer
          <span class="glyphicon sort-icon" ng-show="sortKey=='login_id'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>

        <th ng-click="sort('createdAtUnformatted')">Booking Date
          <span class="glyphicon sort-icon" ng-show="sortKey=='createdAtUnformatted'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>

        <th ng-click="sort('itinerary.id')">Itinerary Id
          <span class="glyphicon sort-icon" ng-show="sortKey=='itinerary.id'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>

        <th ng-click="sort('status')">Status
          <span class="glyphicon sort-icon" ng-show="sortKey=='status'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>

        <th ng-click="sort('itinerary.userDisplayedPrice')">Price at booking
          <span class="glyphicon sort-icon" ng-show="sortKey=='itinerary.userDisplayedPrice'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>
        <th ng-click="sort('pricenow')">Price now
          <span class="glyphicon sort-icon" ng-show="sortKey=='pricenow'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>

        <!--<th>Price at booking</th>-->
        <!--<th>Price now</th>-->
        <!--<th>Departure date</th>-->

        <th ng-click="sort('startDateUnformatted')">Departure date
          <span class="glyphicon sort-icon" ng-show="sortKey=='startDateUnformatted'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>
        <th ng-click="sort('itinerary.formDataObject.nod')">Number of days
          <span class="glyphicon sort-icon" ng-show="sortKey=='itinerary.formDataObject.nod'"
                ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></span>
        </th>

        <!--<th>Number of days</th>-->
      </tr>
      </thead>
      <tbody>
      <tr
        dir-paginate="trips in bookedtrips |orderBy:sortKey:!reverse|filter:{status:searchStatusId}|filter:searchValue|itemsPerPage:8">

        <td class="text-center" style="vertical-align:middle" ng-style="!trips.status && {'background': 'greenyellow'}">
          {{ trips.id }}
        </td>

        <td class="text-center" style="vertical-align:middle" ng-style="!trips.status && {'background': 'greenyellow'}">
          <a ng-click="getItineraryDetails(trips.sequence)">
            {{ trips.ref_number }}
          </a>
        </td>

        <td class="text-center" style="vertical-align:middle">
          <a ng-click="getUserDetails(trips.sequence)">
            {{ trips.login_id }}
          </a>
        </td>

        <td class="text-center" style="vertical-align:middle">{{ trips.createdAt }}</td>
        <td class="text-center" style="vertical-align:middle">{{ trips.itinerary.id}}</td>


        <td class="text-center" style="vertical-align:middle">
          <!--<div class="btn-group">-->
          <!--<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Status-->
          <!--<span class="caret"></span></button>-->
          <!--<ul class="dropdown-menu" role="menu">-->
          <!--<li ng-repeat="statusno in trips.status"><a>{{statusno}}</a></li>-->

          <!--</ul></div>-->

          <div>

            <!--<input type="text" class="form-control" ng-model="activitiesController.currency" placeholder="Type">-->
            <select class="form-control" ng-model="trips.status" ng-change="updateStatus(trips.sequence)"
                    ng-options="item.id as item.name for item in allstatus">
              <option value="">Select Option</option>
            </select>

          </div>


        </td>

        <td class="text-center" style="vertical-align:middle">{{ trips.itinerary.userDisplayedPrice }}</td>
        <td class="text-center" style="vertical-align:middle">{{ trips.pricenow }}</td>
        <td class="text-center" style="vertical-align:middle">{{ trips.itinerary.formDataObject.start_date}}</td>
        <td class="text-center" style="vertical-align:middle">{{ trips.itinerary.formDataObject.nod }}</td>


      </tr>
      </tbody>
    </table>
    <dir-pagination-controls
      max-size="20"
      direction-links="true"
      boundary-links="true">
    </dir-pagination-controls>
  </div>
  <!-- End table-responsive -->

  <button style="position:relative;z-index:20" class="btn btn-success" ng-click="getMoreBookedTrips();">
    <span class="glyphicon glyphicon-"></span> Get More
  </button>


  <br><br>


  <modal title="" dikhao="bookshowModal1" class="container-fluid">

    <div class="row">
      <div class="col-sm-1"></div>
      <div class="col-sm-10">


        <!--<h3 align="center">Itinerary Details</h3>-->

        <table class="table table-striped table-bordered">
          <tbody>
          <tr>
            <td class=" col-sm-4">
              <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                <tbody>
                <tr>
                  <td>No of adults</td>
                  <td>{{alldetails.noofadults}}</td>
                </tr>
                </tbody>
              </table>
            </td>
            <td class=" col-sm-4">
              <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                <tbody>
                <tr>
                  <td>No of kids</td>
                  <td>{{alldetails.noofkids}}</td>
                </tr>
                </tbody>
              </table>
            </td>
            <td class="col-sm-4">
              <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                <tbody>
                <tr>
                  <td>No of child</td>
                  <td>{{alldetails.noofchild}}</td>
                </tr>
                </tbody>
              </table>
            </td>

          </tr>
          </tbody>

        </table>

        <table class="table table-striped table-bordered">
          <tbody>
          <tr>
            <td class=" col-sm-4">No of rooms</td>
            <td class="col-sm-8">{{alldetails.noofadults}}</td>


          </tr>
          <tr>

            <td class="col-sm-4">Start city</td>
            <td class="col-sm-8"> {{alldetails.startcity}}</td>

          </tr>
          <tr>
            <td class="col-sm-4">Themes Selected:</td>
            <td class="col-sm-8"><span ng-repeat="x in alldetails.themes" class="text-center">{{x}}</span>
            </td>

          </tr>
          <tr>
            <td class="col-sm-4">Exchange Rate({{alldetails.currency}} to INR)</td>
            <td class="col-sm-8"> {{alldetails.exchangerate}}</td>

          </tr>

          </tbody>

        </table>


        <h4 align="center">{{alldetails.name}}</h4>

        <div class="well" ng-repeat="day in alldetails.days">
          <h4 align="center">Day : {{$index+1}}</h4>


          <h4 align="center">
            City: {{day.cityName}}
          </h4>

          <table class="table table-striped table-bordered">
            <tbody>
            <tr>
              <td class="col-sm-4">Breakfast: {{day.breakfast}}</td>
              <td class="col-sm-4">Lunch: {{day.lunch}}</td>
              <td class="col-sm-4">Dinner: {{day.dinner}}</td>
            </tr>
            </tbody>

          </table>

          <table class="table table-striped table-bordered" ng-hide="$index === (alldetails.days.length - 1)">
            <tbody>
            <tr>
              <td class="col-sm-4">Hotel id : {{day.hotelId}}</td>
              <td class="col-sm-4">Hotel name : {{day.hotelName}}</td>
              <td class="col-sm-4">Hotel Price : {{day.hotelPrice}}</td>
            </tr>
            </tbody>

          </table>

          <table class="table table-striped table-bordered" ng-hide="$index === (alldetails.days.length - 1)">
            <tbody>
            <tr>
              <td class="col-sm-4">Hotel Currency : {{day.hotelCurrency}}</td>
              <td class="col-sm-4">Hotel Room type: {{day.hotelRoomtype}}</td>
            </tr>
            </tbody>

          </table>

          <div class="row" ng-repeat="x in day.activities">
            <div class="col-sm-1"></div>


            <div class="col-sm-10">
              <h4>{{x.type}} : {{x.name}} </h4>

              <table class="table table-striped table-bordered">
                <tbody>
                <tr>
                  <td class="col-sm-6">Start time: {{x.starttime}}</td>
                  <td class="col-sm-6">End time: {{x.endtime}}</td>


                </tr>
                </tbody>

              </table>

              <table class="table table-striped table-bordered">
                <tbody>
                <tr>
                  <td class="col-sm-4">Price Adult: {{x.priceadult}}</td>
                  <td class="col-sm-4">Price Child: {{x.pricechild}}</td>
                  <td class="col-sm-4">Currency: {{x.currency}}</td>


                </tr>
                </tbody>

              </table>


            </div>
          </div>

        </div>
        <div class="well">
          <h4 align="center">Hotel Details</h4>

          <div class="row" ng-repeat="x in alldetails.hoteldetails">
            <div class="col-sm-1"></div>


            <div class="col-sm-10">
              <h4>City : {{ x.cityName }}</h4>

              <table class="table table-striped table-bordered">
                <tbody>
                <tr>
                  <td class="col-sm-6">Hotel Id: {{x.hotelid}}</td>
                  <td class="col-sm-6">Hotel name: {{x.hotelname}}</td>


                </tr>
                </tbody>

              </table>


            </div>
          </div>


        </div>
        <div class="well">
          <h4>Tax Details</h4>

          <table class="table table-bordered">
            <tbody>
            <tr>
              <td class="col-sm-6">
                <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                  <tbody>
                  <tr>
                    <td class="col-sm-6">Activity:</td>
                    <td>{{alldetails.activitytax}}%</td>
                  </tr>
                  </tbody>
                </table>
              </td>
              <td class="col-sm-6">
                <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                  <tbody>
                  <tr>
                    <td class="col-sm-6">Hotel:</td>
                    <td>{{alldetails.hoteltax}}%</td>
                  </tr>
                  </tbody>
                </table>
              </td>


            </tr>
            <tr>
              <td class="col-sm-6">
                <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                  <tbody>
                  <tr>
                    <td class="col-sm-6">Flight:</td>
                    <td>{{alldetails.flighttax}}%</td>
                  </tr>
                  </tbody>
                </table>
              </td>
              <td class="col-sm-6">
                <table class="table table-striped table-bordered" style="margin-bottom:0px;">
                  <tbody>
                  <tr>
                    <td class="col-sm-6">Transport:</td>
                    <td>{{alldetails.transporttax}}%</td>
                  </tr>
                  </tbody>
                </table>
              </td>

            </tr>
            </tbody>

          </table>


        </div>

        <div class="well">
          <h4>Final Amount</h4>


          <table class="table table-striped table-bordered">
            <tbody>
            <tr>
              <td class="  col-sm-6">Activity:</td>
              <td class="  col-sm-6">{{alldetails.activitytotal}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Minitour:</td>
              <td class="  col-sm-6">{{alldetails.minitourtotal}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Hotel:</td>
              <td class="  col-sm-6">{{alldetails.hoteltotal}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Total:</td>
              <td class="  col-sm-6">{{alldetails.final}}</td>
            </tr>
            </tbody>

          </table>


        </div>

        <div class="well">
          <h4>Other Information</h4>

          <table class="table table-striped table-bordered">
            <tbody>
            <tr>
              <td class="  col-sm-6">Information:</td>
              <td class="  col-sm-6">{{alldetails.info}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Description:</td>
              <td class="  col-sm-6">{{alldetails.desc}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Inclusions:</td>
              <td class="  col-sm-6">{{alldetails.inc}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Exclusions:</td>
              <td class="  col-sm-6">{{alldetails.exc}}</td>
            </tr>
            <tr>
              <td class="  col-sm-6">Terms and Conditions:</td>
              <td class="  col-sm-6">{{alldetails.tnc}}</td>
            </tr>
            </tbody>

          </table>


        </div>

      </div>
      <div class="col-sm-12">


        <button type="button" class="btn btn-success" style="float:right;" ng-click="bookedTripsmodal1()">OK</button>

      </div>

    </div>


  </modal>


  <modal title="User details" dikhao="bookshowModal2" class="container-fluid">


    <div class="row">
      <div class="col-sm-1"></div>


      <div class="col-sm-10">

        <table class="table table-striped table-bordered">
          <tbody>
          <tr>
            <td class="  col-sm-4">Name:</td>
            <td class="  col-sm-8">{{userdetails.name}}</td>
          </tr>
          <tr>
            <td class="  col-sm-4">Email:</td>
            <td class="  col-sm-8">{{userdetails.userId}}</td>
          </tr>
          <tr>
            <td class="  col-sm-4">Contact no:</td>
            <td class="  col-sm-8">{{userdetails.contact}}</td>
          </tr>

          </tbody>

        </table>

      </div>
      <div class="col-sm-12">


        <button type="button" class="btn btn-success" style="float:right;" ng-click="bookedTripsmodal2()">OK</button>

      </div>


    </div>


  </modal>


  <modal dikhao="showoffline" class="container-fluid">
    <div class="row" ng-show="modalpage === 1">
      <form class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-4 control-label">Email:<span style="color:red">*</span></label>

          <div class="col-sm-5">
            <input type="email" class="form-control" ng-model="emailoffline" placeholder="Email">
          </div>
        </div>
      </form>
      <div class="col-sm-12">

        <button type="button" class="btn btn-success" style="float:right;" ng-disabled="!emailoffline"
                ng-click="createCustomer()">Create Customer
        </button>

      </div>


    </div>


    <div class="row" ng-show="modalpage === 2">

      <form class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-4 control-label">Name:<span style="color:red">*</span></label>

          <div class="col-sm-5">
            <input type="text" class="form-control" ng-model="offlinename" placeholder="Name">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-4 control-label">Phone:<span style="color:red">*</span></label>

          <div class="col-sm-5">
            <input type="text" class="form-control" ng-model="offlinephone" ng-minlength="10" ng-maxlength="10" placeholder="Phone">
          </div>
        </div>
      </form>

      <div class="col-sm-12">
        <button type="button" class="btn btn-success" style="float:right;" ng-disabled="!offlinename || !offlinephone"
                ng-click="addOfflineDetails()">Next</button>
      </div>


    </div>

    <div class="row" ng-show="modalpage === 3">



      <form class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-4 control-label">Booking Date (mm/dd/yyyy):<span style="color:red">*</span></label>
          <div class="col-sm-5">
            <input type="date" class="form-control" ng-model="offlinebookingdate" placeholder="Date">
          </div>

        </div>
        <div class="form-group">
          <label class="col-sm-4 control-label">Price:<span style="color:red">*</span></label>
          <div class="col-sm-5">
            <input type="number" class="form-control mod" ng-model="offlineprice" placeholder="Price" min="0">
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-4 control-label">Status:<span style="color:red">*</span></label>
          <div class="col-sm-5">
            <select class="form-control" ng-model="offlinestatus" ng-options="item.id as item.name for item in allstatus">
              <option value="">Select Option</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-4 control-label">Travel Date (mm/dd/yyyy):<span style="color:red">*</span></label>
          <div class="col-sm-5">
            <input type="date" class="form-control" ng-model="offlinetraveldate" placeholder="Date">
          </div>

        </div>
        <div class="form-group">
          <label class="col-sm-4 control-label">Number of Days:<span style="color:red">*</span></label>
          <div class="col-sm-5">
            <input type="number" class="form-control mod" ng-model="offlinedays" placeholder="Days" min="0">
          </div>
        </div>



      </form>



      <div class="col-sm-12">


        <button type="button" class="btn btn-success" style="float:right;" ng-disabled="!offlinebookingdate || !offlineprice
        || !offlinestatus || !offlinetraveldate || !offlinedays" ng-click="submitOfflineItenerary()">Submit
        </button>

      </div>


    </div>


  </modal>


</div>
